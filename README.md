# Typewriter

### Parse Go JSON-tagged types to other language types. Focused on front-end languages.


Currently supports JavaScript Flow, TypeScript, and (some) Elm.

For custom types, add the tag, `tw:"<CustomTypeName>,<PointerBool>"`

Please create an Issue for requests, and include examples of Go types to the requested language.

##### Currently under development. 

____
### Example:
Go types:
```go
package stubs

// Data should all parse right.
// It's hard to get them to do that.
// @strict
type Data struct {
	MapStringInt  map[string]int            `json:"map_string_to_int" tw:"override_map_name,false"`  // I am a map of strings and ints
	MapStringInts map[string][]int          `json:"map_string_to_ints"`                              // I am a map of strings to a slice of ints
	MapStringMap  map[string]map[string]int `json:"map_string_to_maps" tw:"override_map_name2,true"` // I am a map of strings to maps
	MapIgnore     map[int]int               `json:"-"`
	Peeps         People                    `json:"peeps"`
}

// Person ...
type Person struct {
	Name string `json:"name"`
	Age  int    `json:"age"`
}

// People is a map of strings to person
type People map[string]Person

// Nested defaults to the closest "Object" type in any language. Utilize the `tw` tag if needed.
type Nested struct {
	Person struct{} `json:"person"`
}

// Embedded will take all types from the embedded types and insert them in to the new type.
type Embedded struct {
	Person
}

```

Converts to flow types:
```js
// @flow
// Automatically generated by typewriter. Do not edit.
// http://www.github.com/natdm/typewriter


// Data should all parse right.
// It's hard to get them to do that.
// @strict
export type Data = {| 
	map_string_to_int: override_map_name, // I am a map of strings and ints

	map_string_to_ints: { [key: string]: Array<number> }, // I am a map of strings to a slice of ints

	map_string_to_maps: ?override_map_name2, // I am a map of strings to maps

	peeps: People
|}

// Embedded will take all types from the embedded types and insert them in to the new type.
export type Embedded = { 
	name: string, 
	age: number
}

export type MyNumber = number

// Nested defaults to the closest "Object" type in any language. Utilize the `tw` tag if needed.
export type Nested = { 
	person: Object
}

// People is a map of strings to person
export type People = { [key: string]: Person }

// Person ...
export type Person = { 
	name: string, 
	age: number
}

export type Thing = { 
	name: number
}
```
---

Does not support:
Nested structs (changes to the closest form, eg 'Object' in flow)
Interfaces within structs

Usage:

```
$ go get github.com/natdm/typewriter
$ $GOPATH/bin/typewriter -dir ./your/models/directory -lang flow -v -out ./save/to/models.js
```

```bash
	Flags:
		-dir	Parse a complete directory 
			example: 	-dir= ../src/appname/models/
			default: 	./

		-file	Parse a single go file 
			example: 	-file= ../src/appname/models/app.go
			overrides 	-dir and -recursive

		-out	Saves content to folder
			example: 	-out= ../src/appname/models/
						-out= ../src/appname/models/customname.js
			default: 	./models. 

		-r		Transcends directories
			example:	-recursive= false
			default:	true

		-v		Verbose logging, detailing every skipped type, file, or field.
			default: 	false

		-lang 	Language to parse to. One of ["flow"]
			example:	-lang flow
			default:	will not parse
```

___
#### TODO:
* More tests